<td *ngIf="displayType != 'activity' && displayType != 'activityForm'">
  {{ route.date | date: "d. M. yyyy" }}
</td>
<td *ngIf="displayType != 'activity' && displayType != 'activityForm'">
  <a [routerLink]="['/plezalisce', route.route.crag.slug]">{{
    route.route.crag.name
  }}</a>
</td>
<td>
  <a
    [routerLink]="[
      '/plezalisce',
      route.route.crag.slug,
      'smer',
      route.route.slug
    ]"
    [target]="displayType == 'activityForm' ? '_blank' : '_self'"
    >{{ route.route.name
    }}{{ route.pitch ? " (R" + route.pitch.number + ")" : "" }}</a
  >
</td>

<td>
  <span *ngIf="route.pitch; else notPitchOnly">
    <span *ngIf="route.pitch.isProject">P</span>
    <app-grade
      *ngIf="!route.pitch.isProject"
      [difficulty]="route.pitch.difficulty"
      [gradingSystemId]="route.route.defaultGradingSystem.id"
      [showModifier]="true"
    ></app-grade>
  </span>
  <ng-template #notPitchOnly>
    <span *ngIf="route.route.isProject">P</span>
    <app-grade
      *ngIf="!route.route.isProject"
      [difficulty]="route.route.difficulty"
      [gradingSystemId]="route.route.defaultGradingSystem.id"
      [showModifier]="true"
    ></app-grade>
  </ng-template>
</td>
<td>
  <app-ascent-type [value]="route.ascentType"></app-ascent-type>
</td>
<td *ngIf="!noNotes">{{ route.notes }}</td>
<td>
  <app-ascent-publish-option
    [value]="route.publish"
  ></app-ascent-publish-option>
</td>

<td *ngIf="rowAction" class="tools">
  <button mat-icon-button type="button" [mat-menu-trigger-for]="menu">
    <mat-icon>more_vert</mat-icon>
  </button>

  <mat-menu #menu="matMenu">
    <button
      *ngIf="
        route.activity &&
        displayType != 'activity' &&
        displayType != 'activityForm'
      "
      mat-menu-item
      type="button"
      [routerLink]="['/plezalni-dnevnik', route.activity.id]"
    >
      <span>Odpri plezalni dan</span>
    </button>
    <button
      mat-menu-item
      type="button"
      (click)="rowAction.next({ item: route, action: 'filterByRoute' })"
      *ngIf="displayType != 'activityForm'"
    >
      <span>Vsi vzponi za to smer</span>
    </button>
    <button
      mat-menu-item
      type="button"
      (click)="rowAction.next({ item: route, action: 'filterByCrag' })"
      *ngIf="displayType != 'activityForm'"
    >
      <span>Vsi vzponi v tem plezališču</span>
    </button>
    <button mat-menu-item type="button" [mat-menu-trigger-for]="publishMenu">
      <span>Spremeni vidnost</span>
    </button>
    <button
      mat-menu-item
      type="button"
      (click)="rowAction.next({ item: route, action: 'delete' })"
    >
      <span>Odstrani vzpon</span>
    </button>
  </mat-menu>

  <mat-menu #publishMenu="matMenu">
    <button
      mat-menu-item
      type="button"
      *ngFor="let publishOption of publishOptions"
      [disabled]="publishOption.value == route.publish"
      (click)="changePublish(publishOption.value)"
    >
      <span>{{ publishOption.label }}</span>
    </button>
  </mat-menu>
</td>
