<app-data-error *ngIf="error" [error]="error"></app-data-error>

<app-loader *ngIf="loading"></app-loader>

<div *ngIf="!error && !loading">

    <h1>
        <div class="container p15" fxLayout="row" fxLayoutAlign="start center">
            <div fxFlex="100">{{ crag.name }}</div>
            <button mat-icon-button>
                <mat-icon>more_vert</mat-icon>
            </button>
        </div>
    </h1>

    <div class="crag-map-container" *ngIf="!loading && crag.country.code == 'SI'">
        <div class="crag-map">
            <app-crags-map></app-crags-map>
        </div>
    </div>

    <div class="container" fxLayout="row" fxLayoutGap="12px" fxLayout.lt-md="column">

        <div fxFlex="320px" fxFlex.lt-md *ngIf="crag">

            <nav mat-tab-nav-bar>
                <a mat-tab-link disabled> Lokacija </a>
            </nav>

            <div class="toc-title">
                {{ crag.country.name }}{{ crag.area ? ', ' + crag.area.name : '' }}
            </div>

            <div>
                <app-map [height]="260" [crag]="crag" [crags]="crags$"></app-map>
            </div>

            <div *ngIf="crag.access">
                <div class="toc-title">
                    Dostop
                </div>
                <div class="toc-content" [innerHTML]="crag.access"></div>
            </div>

        </div>

        <div fxFlex="100" fxFlex.lt-md fxLayout="column" fxLayoutGap="12px">

            <nav mat-tab-nav-bar>
                <ng-container *ngFor="let tab of tabs">
                    <a mat-tab-link *ngIf="tab.slug != 'lokacija'" [active]="tab == activeTab" (click)="setActiveTab(tab)"> {{ tab.label }} </a>
                </ng-container>
            </nav>

            <app-crag-routes [crag]="crag" *ngIf="activeTab.slug == 'smeri'"></app-crag-routes>
            <app-crag-info [crag]="crag" *ngIf="activeTab.slug == 'info'"></app-crag-info>
        </div>

    </div>
</div>