<app-data-error *ngIf="error" [error]="error"></app-data-error>

<app-loader *ngIf="loading"></app-loader>

<div *ngIf="!error && !loading">

    <h1>
        <div class="container p15" fxLayout="row" fxLayoutAlign="start center">
            <div fxFlex="100">{{ crag.name }}</div>
            <button mat-icon-button>
                <mat-icon>more_vert</mat-icon>
            </button>
        </div>
    </h1>

    <div class="crag-map-container" *ngIf="!loading && crag.country.code == 'SI'">
        <div class="crag-map">
            <app-crags-map></app-crags-map>
        </div>
    </div>

    <div class="container" fxLayout="row" fxLayoutGap="12px" fxLayout.lt-md="column">

        <div fxFlex="320px" fxFlex.lt-md *ngIf="crag">
            <div class="toc-title">
                {{ crag.country.name }}{{ crag.area ? ', ' + crag.area.name : '' }}
            </div>

            <div>
                <app-map [height]="260" [crag]="crag" [crags]="crags$"></app-map>
            </div>

            <div *ngIf="crag.access">
                <div class="toc-title">
                    Dostop
                </div>
                <div class="toc-content" [innerHTML]="crag.access"></div>
            </div>
            <div *ngIf="crag.description">
                <div class="toc-title">
                    Opis
                </div>
                <div class="toc-content" [innerHTML]="crag.description"></div>
            </div>

        </div>

        <div fxFlex="100" fxFlex.lt-md fxLayout="column" fxLayoutGap="12px">

            <div *ngFor="let sector of crag.sectors">

                <h3>{{ sector.label }} <span>{{ sector.name != '' ? ' - '+sector.name : '' }}</span></h3>
                <div class="card">
                    <div fxLayout="row" fxLayoutAlign="start center" fxHide.lt-md class="row header">
                        <div fxFlex="50" fxFlex.lt-md="100">Ime</div>
                        <div fxFlex="25" fxFlex.lt-md>Dolžina</div>
                        <div fxFlex="25" fxFlex.lt-md>Težavnost</div>
                    </div>
                    <div *ngFor="let route of sector.routes" fxLayout="row" fxLayoutAlign="start center" class="row">
                        <div fxFlex="50" fxFlex.lt-md="100">
                            <a [routerLink]="['/plezalisca/',crag.country.slug, crag.slug, route.id]">{{ route.name
                                }}</a>
                        </div>
                        <div fxFlex="25" fxFlex.lt-md fxHide.lt-md>{{ route.length }} m</div>
                        <div fxFlex="25" fxFlex.lt-md class="routes">
                            <app-grade [grade]="route.grade" [text]="route.difficulty" [showModifier]="true">
                            </app-grade>
                        </div>
                    </div>
                </div>
            </div>

        </div>

    </div>
</div>